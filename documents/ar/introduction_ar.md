## ما هو مصدر بيانات جوديجا؟

يدير تدفق البيانات التي نستقبلها أو نرسلها إلى الخوادم عبر واجهات برمجة التطبيقات (APIs) أو أي منصة خادم مثل Firebase. يعيد تشكيل البيانات لتتوافق مع منطق الأعمال لعرضها للمستخدم إذا كانت البيانات قادمة من الخادم، أو يقوم بتنسيقها كـ JSON عند إرسالها إلى الخوادم.

## كيف يعمل مصدر بيانات جوديجا؟

تنقسم هذه المكتبة إلى ثلاثة أجزاء:

# هيكل المكتبة: المستودع، موصل مصدر البيانات، وأداة مصدر البيانات

توضح هذه الوثيقة هيكل المكتبة المقسمة إلى ثلاثة أجزاء رئيسية: المستودع، موصل مصدر البيانات، وأداة مصدر البيانات. يعزز هذا الهيكل فصل الاهتمامات، وقابلية الاختبار، والصيانة.

## 1. طبقة المستودع

- **الغرض:** تعمل كوسيط بين منطق الأعمال في التطبيق (مثل نماذج العرض، حالات الاستخدام، إدارة الحالة) وطبقة البيانات (مصادر البيانات). توفر واجهة برمجة تطبيقات (API) نظيفة ومتسقة للوصول إلى البيانات، بغض النظر عن مصدر البيانات.

- **المسؤوليات:**

  - **تجريد البيانات:** يخفي تعقيدات استرجاع البيانات وتخزينها.
  - **تجميع البيانات:** يمكنه دمج البيانات من مصادر بيانات متعددة.
  - **التخزين المؤقت:** قد يقوم بتطبيق آليات التخزين المؤقت لتحسين الأداء.
  - **معالجة الأخطاء:** يتعامل مع الأخطاء المتعلقة بالبيانات ويوفر طريقة متسقة للإبلاغ عنها.
  - **منطق الأعمال:** قد يحتوي على بعض منطق الأعمال المتعلق بمعالجة البيانات.

- **مثال:**

  - قد يوفر `BaseAuthRepo` طرقًا مثل `getUserById(int id)`، و `userLogIn`، و `createUserAccount(User user)`، و `updateUserProfile(User user)`.
  - لا يهم المستودع ما إذا كانت البيانات قادمة من قاعدة بيانات محلية، أو واجهة برمجة تطبيقات (API) بعيدة، أو ملف. إنه يوفر البيانات فقط.

- **الفوائد:**
  - **قابلية الاختبار:** يمكن بسهولة محاكاة أو استبدال المستودع في اختبارات الوحدة.
  - **قابلية الصيانة:** التغييرات في طبقة البيانات تتطلب فقط تعديلات في طبقة المستودع.
  - **المرونة:** يمكن بسهولة إضافة أو إزالة مصادر البيانات دون التأثير على بقية التطبيق.

## 2. طبقة موصل مصدر البيانات

- **الغرض:** مسؤولة عن التفاعل مع مصادر بيانات محددة (مثل قاعدة بيانات، واجهة برمجة تطبيقات REST، ملف). توفر واجهة منخفضة المستوى لقراءة وكتابة البيانات.

- **المسؤوليات:**

  - **التفاعل مع مصدر البيانات:** يتعامل مع التفاصيل المحددة للتواصل مع مصدر بيانات معين.
  - **تخطيط البيانات:** يربط البيانات من مصدر البيانات بنماذج بيانات التطبيق.
  - **معالجة الأخطاء:** يتعامل مع الأخطاء الخاصة بمصدر البيانات.

- **أمثلة:**

  - قد يستخدم `LocalDatabaseConnector` SQLite أو Room للتفاعل مع قاعدة بيانات محلية.
  - قد يستخدم `RemoteApiConnector` Retrofit أو HTTP للتفاعل مع واجهة برمجة تطبيقات REST.
  - قد يستخدم `FirebaseConnections` Firebase للتفاعل مع قاعدة بيانات Firebase.

- **الفوائد:**
  - **التغليف:** يخفي تفاصيل التنفيذ لكل مصدر بيانات.
  - **إعادة الاستخدام:** يمكن إعادة استخدام موصلات مصدر البيانات عبر أجزاء مختلفة من التطبيق.
  - **قابلية الاختبار:** يمكن بسهولة محاكاة أو استبدال موصلات مصدر البيانات في اختبارات الوحدة.

## 3. طبقة أداة مصدر البيانات

- **الغرض:** توفر وظائف مساعدة وفئات مساعدة تستخدمها موصلات مصدر البيانات. يحتوي على منطق مشترك بين مصادر بيانات متعددة.

- **المسؤوليات:**

  - **تحويل البيانات:** يوفر وظائف لتحويل البيانات بين تنسيقات مختلفة.
  - **معالجة الأخطاء:** يوفر منطقًا مشتركًا لمعالجة الأخطاء.
  - **أدوات الشبكة:** يوفر أدوات لعمل طلبات الشبكة.
  - **أدوات قاعدة البيانات:** يوفر أدوات للتفاعل مع قواعد البيانات.
  - **أدوات الملفات:** يوفر أدوات للعمل مع الملفات.

- **أمثلة:**

  - قد يوفر `FirebaseAccount` وظائف لإنشاء وتحديث وحذف حسابات المستخدمين في Firebase.
  - قد يوفر `JoDijaHttpClient` وظائف لعمل طلبات HTTP باستخدام Dio أو حزمة http.

- **الفوائد:**
  - **إعادة استخدام الكود:** يتجنب تكرار الكود من خلال توفير منطق مشترك في مكان واحد.
  - **قابلية الصيانة:** يجعل من السهل تحديث المنطق المشترك عبر مصادر بيانات متعددة.
  - **الاتساق:** يضمن التعامل مع البيانات بشكل متسق عبر التطبيق.

## كيف تعمل هذه الطبقات معًا

1.  **يطلب منطق الأعمال (مثل نموذج العرض) البيانات من المستودع.**
2.  **يحدد المستودع أي مصادر البيانات سيستخدم.**
3.  **يستخدم المستودع موصل مصدر البيانات المناسب لاسترجاع البيانات أو تخزينها.**
4.  **يستخدم موصل مصدر البيانات فئات أداة مصدر البيانات للمهام الشائعة.**
5.  **يعيد موصل مصدر البيانات البيانات إلى المستودع.**
6.  **قد يقوم المستودع بتحويل البيانات أو تجميعها قبل إعادتها إلى منطق الأعمال.**

## فوائد هذا الهيكل

- **فصل الاهتمامات:** لكل طبقة مسؤولية محددة، مما يجعل الكود أسهل للفهم والصيانة والاختبار.
- **قابلية الاختبار:** يمكن اختبار كل طبقة بشكل مستقل باستخدام المحاكاة أو الاستبدال.
- **قابلية الصيانة:** التغييرات في طبقة واحدة لها تأثير ضئيل على الطبقات الأخرى.
- **المرونة:** يمكنك بسهولة إضافة أو إزالة مصادر البيانات دون التأثير على بقية التطبيق.
- **إعادة الاستخدام:** يمكن إعادة استخدام موصلات مصدر البيانات وفئات الأدوات عبر أجزاء مختلفة من التطبيق.

هذا الهيكل الطبقي هو طريقة قوية لإدارة البيانات في التطبيقات المعقدة. من خلال فصل الاهتمامات وتوفير واجهات واضحة بين الطبقات، يمكنك إنشاء تطبيق أكثر قوة وقابلية للصيانة والاختبار.

## أنواع حلول التطبيقات

توضح هذه الوثيقة نوعين رئيسيين من حلول التطبيقات، مصنفة حسب هيكلها ونطاقها.

### 1. تطبيقات متعددة الحلول

- **الوصف:** تقدم هذه التطبيقات واجهات مستخدم متعددة (حلول) عبر منصات مختلفة، وكلها متصلة بنفس الواجهة الخلفية. مثال شائع هو تطبيق جوال، وتطبيق ويب، وتطبيق سطح مكتب يشتركون في البيانات ومنطق الأعمال.
- **مثال تكنولوجي:** تطبيق جوال ولوحة تحكم مبنية باستخدام Flutter، متصلة بنفس الخادم وقاعدة البيانات.
- **الخصائص الرئيسية:**
  - **واجهات أمامية متعددة:** توفر واجهات مستخدم لمنصات مختلفة (مثل الجوال، الويب، سطح المكتب).
  - **واجهة خلفية مشتركة:** تتصل جميع الواجهات الأمامية بخادم وقاعدة بيانات واحدة.
  - **اعتماد مصدر البيانات:** يعتمد مصدر البيانات (مثل Jodija) على ملف تكوين YAML.
- **الهيكل:**
  - تطبيق جوال (Flutter) يسمى حل واجهة المستخدم
  - تطبيق ويب (Flutter) يسمى حل واجهة المستخدم
  - تطبيق سطح مكتب (Flutter) يسمى حل واجهة المستخدم
  - حزمة وسيطة (منطق الأعمال) تسمى منطق الأعمال
  - مصدر بيانات جوديجا (يعتمد على YAML)

### 2. تطبيقات ذات حل واحد

- **الوصف:** توفر هذه التطبيقات واجهة مستخدم واحدة، عادةً ما تكون تطبيق جوال، مع لوحة تحكم مبنية باستخدام تقنية مختلفة.
- **مثال تكنولوجي:** تطبيق جوال مع لوحة تحكم مبنية باستخدام React.js أو Angular.js أو أي تقنية ويب أخرى.
- **الخصائص الرئيسية:**
  - **واجهة أمامية واحدة:** تركز بشكل أساسي على واجهة مستخدم واحدة (مثل تطبيق جوال).
  - **لوحة تحكم منفصلة:** يتم بناء لو

## كيفية استخدام المكتبة

قبل أن تبدأ في استخدام المكتبة، يجب عليك تحديد نوع حل التطبيق الخاص بك والهندسة المعمارية التي ستستخدمها، ثم يمكنك البدء في استخدام المكتبة عن طريق اتباع الخطوة:
install the library by adding the following line to your pubspec.yaml file:

1. قم بتثبيت المكتبة عن طريق إضافة السطر التالي إلى ملف pubspec.yaml الخاص بك:

```yaml
dependencies:
  JoDija_reposatory:
  git:
  url: https://github.com/zeftawyapps/jodija_data_souce_module.git
```

> **ملاحظة:** إذا كنت تقوم ببناء تطبيق متعدد الحلول، يجب أن تعتمد مصدر بيانات جوديجا على ملف YAML يقع داخل حزمة منطق الأعمال، وحزمة منطق الأعمال على ملف YAML يقع داخل التطبيق. 2. قم بإضافة الكود التالي لاستيراد المكتبة في ملف dart الخاص بك:

```dart
import 'package:jodija_data_source/jodija_data_source.dart';
```

3.  قم بتكوين مصدر البيانات عن طريق اتباع الخطوات التالية:

- اذا كنت تقوم ببناء تطبيق متعدد الحلول، يجب أن يكون ملف التكوين داخل حزمة منطق الأعمال.
  ستقوم بإضافة هذا الكود إلى ملف التكوين:

```dart
import 'package:JoDija_reposatory/jodija_configration.dart';

class LogicConfigration extends DataSourceConfigration {
  /**
   * Constructor for initializing the service environment.
   *
   * @param senvType The environment type (e.g., `prod`, `dev`).
   * @param sBackendState The backend state (e.g., `local`, `remote_dev`, `remote_prod`).
   *                      This parameter determines whether the backend is local or remote.
   * @param app The application type (e.g., `App`, `Dashboard`).
   *            This parameter specifies the UI solution, such as a user website or an admin control panel, and is used to configure routes.
   */

  setAppConfigration(ServiceEnvType senvType
     ,   SerViceBackendState sBackendState) {
    envType = senvType == ServiceEnvType.prod ? EnvType.prod : EnvType.dev;
    appType = app == SerViceAppType.App ? AppType.App : AppType.DashBord;
    switch (sBackendState) {
      case SerViceBackendState.local:
        backendState = BackendState.local;
        break;
      case SerViceBackendState.remote_dev:
        backendState = BackendState.remote_dev;
        break;
      case SerViceBackendState.remote_prod:
        backendState = BackendState.remote_prod;
        break;
    }
  }


  BackendState isRemote() {
    return backendState;
  }
}
// this is the enums that you will use in the configuration file
enum ServiceEnvType { prod, dev }

enum SerViceAppType { App, Dashboard }

enum SerViceBackendState { local, remote_dev, remote_prod }

```

ثم في حل واجهة المستخدم ستقوم بإضافة هذا الكود إلى ملف التكوين:

```dart
class AppConfigration  extends LogicConfigration  {
// this is the enums that you will use in the configuration file
  }
```

للمزيد من المعلومات حول التكوينات واستخدام المكتبة في تطبيق متعدد الحلول يمكنك زيارة [استخدام تطبيق متعدد الحلول]()

- if you are building a single-solution app, then the configuration file should be located within the App package.
  so you will add this code to the configuration file:
- اذا كنت تقوم ببناء تطبيق ذو حل واحد، يجب أن يكون ملف التكوين داخل حزمة التطبيق.
  ```dart
  class AppConfigration  extends DataSourceConfigration  {
     // this is the enums that you will use in the configuration file
   }
  ```
  للمزيد من المعلومات حول التكوينات واستخدام المكتبة في تطبيق ذو حل واحد يمكنك زيارة [استخدام تطبيق ذو حل واحد]()
